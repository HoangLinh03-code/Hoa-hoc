<!-- @format -->

<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>M√¥ ph·ªèng Ph·∫£n ·ª©ng Oxi h√≥a - Kh·ª≠</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #2193b0 0%, #6dd5ed 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      }

      .header p {
        font-size: 1.2em;
        opacity: 0.95;
      }

      .main-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        padding: 30px;
      }

      .simulation-area {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        border-radius: 15px;
        padding: 25px;
        box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .beaker {
        position: relative;
        width: 100%;
        height: 400px;
        background: linear-gradient(
          to bottom,
          transparent 0%,
          transparent 20%,
          #87ceeb 20%,
          #4682b4 100%
        );
        border: 4px solid #333;
        border-radius: 0 0 30px 30px;
        margin: 20px 0;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .solution {
        position: absolute;
        bottom: 0;
        width: 100%;
        height: 80%;
        transition: background-color 0.5s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }

      .iron-nail {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        width: 20px;
        height: 200px;
        background: linear-gradient(
          90deg,
          #b0b0b0 0%,
          #dcdcdc 50%,
          #b0b0b0 100%
        );
        border-radius: 10px 10px 3px 3px;
        top: 15%;
        z-index: 10;
        box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
        transition: background 1s ease;
      }

      .iron-nail::before {
        content: "";
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 30px;
        height: 30px;
        background: #b0b0b0;
        border-radius: 50%;
      }

      .electron {
        position: absolute;
        width: 12px;
        height: 12px;
        background: #ffd700;
        border-radius: 50%;
        box-shadow: 0 0 15px #ffd700, 0 0 30px #ffd700;
        animation: float 2s infinite ease-in-out;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      .ion {
        position: absolute;
        border-radius: 50%;
        font-size: 14px;
        font-weight: bold;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        animation: drift 4s infinite ease-in-out;
      }

      @keyframes drift {
        0%,
        100% {
          transform: translate(0, 0);
        }
        25% {
          transform: translate(10px, -10px);
        }
        50% {
          transform: translate(-5px, 10px);
        }
        75% {
          transform: translate(-10px, -5px);
        }
      }

      .cu-ion {
        width: 35px;
        height: 35px;
        background: radial-gradient(circle at 30% 30%, #4169e1, #0000cd);
        box-shadow: 0 0 10px #4169e1;
      }

      .fe-ion {
        width: 30px;
        height: 30px;
        background: radial-gradient(circle at 30% 30%, #90ee90, #228b22);
        box-shadow: 0 0 10px #90ee90;
      }

      .cu-deposit {
        position: absolute;
        background: radial-gradient(circle at 30% 30%, #cd7f32, #8b4513);
        border-radius: 50%;
        animation: deposit 2s ease-out forwards;
      }

      @keyframes deposit {
        from {
          opacity: 0;
          transform: scale(0);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .controls {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .control-group {
        margin-bottom: 25px;
      }

      .control-group label {
        display: block;
        font-weight: 600;
        margin-bottom: 10px;
        color: #333;
        font-size: 1.1em;
      }

      .slider-container {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      input[type="range"] {
        flex: 1;
        height: 8px;
        border-radius: 5px;
        background: #ddd;
        outline: none;
        -webkit-appearance: none;
      }

      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 25px;
        height: 25px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        cursor: pointer;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }

      input[type="range"]::-moz-range-thumb {
        width: 25px;
        height: 25px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        cursor: pointer;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        border: none;
      }

      .value-display {
        min-width: 80px;
        text-align: center;
        font-weight: 600;
        font-size: 1.1em;
        color: #667eea;
        background: #f0f0f0;
        padding: 8px 15px;
        border-radius: 8px;
      }

      .button-group {
        display: flex;
        gap: 15px;
        margin-top: 20px;
      }

      button {
        flex: 1;
        padding: 15px;
        border: none;
        border-radius: 10px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      }

      .start-btn {
        background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        color: white;
      }

      .start-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
      }

      .reset-btn {
        background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
        color: white;
      }

      .reset-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
      }

      .pause-btn {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
      }

      .pause-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
      }

      .info-panel {
        grid-column: 1 / -1;
        background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        border-radius: 15px;
        padding: 25px;
        margin-top: 10px;
      }

      .info-panel h3 {
        color: #d63031;
        margin-bottom: 15px;
        font-size: 1.5em;
      }

      .equation {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
        font-size: 1.3em;
        text-align: center;
        font-weight: 600;
        color: #2d3436;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      }

      .steps {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .step {
        background: white;
        padding: 15px;
        border-radius: 10px;
        border-left: 4px solid #667eea;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      }

      .step h4 {
        color: #667eea;
        margin-bottom: 8px;
      }

      .stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        margin-top: 20px;
      }

      .stat-card {
        background: white;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      }

      .stat-card h4 {
        color: #666;
        font-size: 0.9em;
        margin-bottom: 10px;
      }

      .stat-card .value {
        font-size: 2em;
        font-weight: bold;
        color: #667eea;
      }

      .legend {
        display: flex;
        gap: 20px;
        margin-top: 15px;
        flex-wrap: wrap;
        justify-content: center;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
        background: white;
        padding: 10px 15px;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      .legend-color {
        width: 25px;
        height: 25px;
        border-radius: 50%;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      }

      @media (max-width: 768px) {
        .main-content {
          grid-template-columns: 1fr;
        }

        .stats {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>‚öóÔ∏è M√¥ ph·ªèng Ph·∫£n ·ª©ng Oxi h√≥a - Kh·ª≠</h1>
        <p>Fe + CuSO‚ÇÑ ‚Üí FeSO‚ÇÑ + Cu</p>
      </div>

      <div class="main-content">
        <div class="simulation-area">
          <h3 style="text-align: center; color: #333; margin-bottom: 15px">
            C·ªëc Th·ªßy Tinh
          </h3>
          <div class="beaker">
            <div class="solution" id="solution">
              <div class="iron-nail" id="ironNail"></div>
            </div>
          </div>
          <div class="legend">
            <div class="legend-item">
              <div class="legend-color" style="background: #4169e1"></div>
              <span>Cu¬≤‚Å∫ (xanh)</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background: #90ee90"></div>
              <span>Fe¬≤‚Å∫ (l·ª•c nh·∫°t)</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background: #cd7f32"></div>
              <span>Cu kim lo·∫°i (ƒë·ªè)</span>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background: #ffd700"></div>
              <span>Electron</span>
            </div>
          </div>
        </div>

        <div class="controls">
          <h3 style="margin-bottom: 20px; color: #333">
            ‚öôÔ∏è ƒêi·ªÅu khi·ªÉn Th√≠ nghi·ªám
          </h3>

          <div class="control-group">
            <label>N·ªìng ƒë·ªô CuSO‚ÇÑ (M)</label>
            <div class="slider-container">
              <input
                type="range"
                id="concentration"
                min="0.1"
                max="2"
                step="0.1"
                value="1" />
              <span class="value-display" id="concValue">1.0 M</span>
            </div>
          </div>

          <div class="control-group">
            <label>Nhi·ªát ƒë·ªô (¬∞C)</label>
            <div class="slider-container">
              <input
                type="range"
                id="temperature"
                min="20"
                max="80"
                step="5"
                value="25" />
              <span class="value-display" id="tempValue">25¬∞C</span>
            </div>
          </div>

          <div class="control-group">
            <label>T·ªëc ƒë·ªô ph·∫£n ·ª©ng</label>
            <div class="slider-container">
              <input
                type="range"
                id="speed"
                min="0.5"
                max="3"
                step="0.5"
                value="1" />
              <span class="value-display" id="speedValue">1.0x</span>
            </div>
          </div>

          <div class="button-group">
            <button class="start-btn" onclick="startReaction()">
              ‚ñ∂Ô∏è B·∫Øt ƒë·∫ßu
            </button>
            <button class="pause-btn" onclick="pauseReaction()">
              ‚è∏Ô∏è T·∫°m d·ª´ng
            </button>
            <button class="reset-btn" onclick="resetReaction()">
              üîÑ L√†m l·∫°i
            </button>
          </div>

          <div class="stats">
            <div class="stat-card">
              <h4>Th·ªùi gian</h4>
              <div class="value" id="timeValue">0s</div>
            </div>
            <div class="stat-card">
              <h4>Cu¬≤‚Å∫ c√≤n l·∫°i</h4>
              <div class="value" id="cuIons">100%</div>
            </div>
            <div class="stat-card">
              <h4>Cu ƒë√£ t·∫°o</h4>
              <div class="value" id="cuDeposit">0%</div>
            </div>
          </div>
        </div>

        <div class="info-panel">
          <h3>üìö Th√¥ng tin Ph·∫£n ·ª©ng</h3>
          <div class="equation">Fe + Cu¬≤‚Å∫ + SO‚ÇÑ¬≤‚Åª ‚Üí Fe¬≤‚Å∫ + SO‚ÇÑ¬≤‚Åª + Cu‚Üì</div>
          <div class="steps">
            <div class="step">
              <h4>B∆∞·ªõc 1: Oxi h√≥a</h4>
              <p>Fe ‚Üí Fe¬≤‚Å∫ + 2e‚Åª</p>
              <p style="font-size: 0.9em; color: #666; margin-top: 5px">
                S·∫Øt nh∆∞·ªùng 2 electron
              </p>
            </div>
            <div class="step">
              <h4>B∆∞·ªõc 2: Kh·ª≠</h4>
              <p>Cu¬≤‚Å∫ + 2e‚Åª ‚Üí Cu</p>
              <p style="font-size: 0.9em; color: #666; margin-top: 5px">
                ƒê·ªìng nh·∫≠n 2 electron
              </p>
            </div>
            <div class="step">
              <h4>K·∫øt qu·∫£</h4>
              <p>‚Ä¢ Dung d·ªãch nh·∫°t m√†u d·∫ßn</p>
              <p>‚Ä¢ Cu ƒë·ªè b√°m tr√™n Fe</p>
              <p>‚Ä¢ Fe b·ªã ƒÉn m√≤n</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      let animationInterval;
      let isPaused = false;
      let elapsedTime = 0;
      let cuPercentage = 100;
      let cuDepositPercentage = 0;
      let electronCount = 0;
      let ionCount = 0;

      const solution = document.getElementById("solution");
      const ironNail = document.getElementById("ironNail");
      const concSlider = document.getElementById("concentration");
      const tempSlider = document.getElementById("temperature");
      const speedSlider = document.getElementById("speed");

      // C·∫≠p nh·∫≠t gi√° tr·ªã hi·ªÉn th·ªã
      concSlider.oninput = function () {
        document.getElementById("concValue").textContent = this.value + " M";
        updateSolutionColor();
      };

      tempSlider.oninput = function () {
        document.getElementById("tempValue").textContent = this.value + "¬∞C";
      };

      speedSlider.oninput = function () {
        document.getElementById("speedValue").textContent = this.value + "x";
      };

      function updateSolutionColor() {
        const conc = parseFloat(concSlider.value);
        const progress = cuPercentage / 100;

        // T√≠nh m√†u d·ª±a tr√™n n·ªìng ƒë·ªô Cu¬≤‚Å∫ c√≤n l·∫°i
        const blueIntensity = Math.floor(70 + progress * conc * 100);
        const greenIntensity = Math.floor(140 + (1 - progress) * 100);

        solution.style.background = `linear-gradient(to bottom, 
                rgba(${blueIntensity}, ${greenIntensity + 50}, ${
          blueIntensity + 100
        }, 0.3) 0%, 
                rgba(${blueIntensity}, ${greenIntensity}, ${
          blueIntensity + 80
        }, 0.8) 100%)`;

        // C·∫≠p nh·∫≠t m√†u ƒëinh s·∫Øt (t·ª´ x√°m sang n√¢u do ƒÉn m√≤n)
        const corrosion = 1 - progress;
        ironNail.style.background = `linear-gradient(90deg, 
                rgb(${176 - corrosion * 50}, ${176 - corrosion * 50}, ${
          176 - corrosion * 50
        }) 0%, 
                rgb(${220 - corrosion * 80}, ${220 - corrosion * 100}, ${
          220 - corrosion * 120
        }) 50%, 
                rgb(${176 - corrosion * 50}, ${176 - corrosion * 50}, ${
          176 - corrosion * 50
        }) 100%)`;
      }

      function createElectron() {
        if (electronCount >= 20) return; // Gi·ªõi h·∫°n s·ªë electron

        const electron = document.createElement("div");
        electron.className = "electron";

        // V·ªã tr√≠ b·∫Øt ƒë·∫ßu t·ª´ ƒëinh s·∫Øt
        const startX = 50;
        const startY = 30 + Math.random() * 40;
        electron.style.left = startX + "%";
        electron.style.top = startY + "%";

        solution.appendChild(electron);
        electronCount++;

        // Di chuy·ªÉn electron
        let x = startX;
        let y = startY;
        const targetX = Math.random() * 80 + 10;
        const targetY = Math.random() * 60 + 20;
        const speed = parseFloat(speedSlider.value);

        const moveInterval = setInterval(() => {
          if (isPaused) return;

          x += (targetX - x) * 0.05 * speed;
          y += (targetY - y) * 0.05 * speed;
          electron.style.left = x + "%";
          electron.style.top = y + "%";

          if (Math.abs(x - targetX) < 1 && Math.abs(y - targetY) < 1) {
            clearInterval(moveInterval);
            electron.remove();
            electronCount--;
            createCuDeposit(targetX, targetY);
          }
        }, 50);
      }

      function createIon(type) {
        if (ionCount >= 50) {
          // Gi·ªõi h·∫°n s·ªë ion
          // X√≥a ion c≈©
          const oldIons = solution.querySelectorAll(".ion");
          if (oldIons.length > 0) {
            oldIons[0].remove();
            ionCount--;
          }
        }

        const ion = document.createElement("div");
        ion.className = `ion ${type}-ion`;
        ion.textContent = type === "cu" ? "Cu¬≤‚Å∫" : "Fe¬≤‚Å∫";

        ion.style.left = Math.random() * 80 + 10 + "%";
        ion.style.top = Math.random() * 60 + 20 + "%";
        ion.style.animationDelay = Math.random() * 2 + "s";

        solution.appendChild(ion);
        ionCount++;

        // X√≥a ion sau m·ªôt th·ªùi gian
        setTimeout(() => {
          if (ion.parentNode) {
            ion.remove();
            ionCount--;
          }
        }, 8000);
      }

      function createCuDeposit(x, y) {
        const deposit = document.createElement("div");
        deposit.className = "cu-deposit";

        const size = 5 + Math.random() * 10;
        deposit.style.width = size + "px";
        deposit.style.height = size + "px";
        deposit.style.left = 48 + Math.random() * 4 + "%";
        deposit.style.top = 30 + Math.random() * 50 + "%";

        solution.appendChild(deposit);
      }

      function startReaction() {
        if (animationInterval) return;

        isPaused = false;
        const speed = parseFloat(speedSlider.value);
        const temp = parseFloat(tempSlider.value);
        const conc = parseFloat(concSlider.value);

        // T·ªëc ƒë·ªô ph·∫£n ·ª©ng ph·ª• thu·ªôc v√†o nhi·ªát ƒë·ªô v√† n·ªìng ƒë·ªô
        const reactionRate = speed * (1 + (temp - 25) / 100) * conc;

        animationInterval = setInterval(() => {
          if (isPaused) return;

          elapsedTime += 0.1;
          document.getElementById("timeValue").textContent =
            elapsedTime.toFixed(1) + "s";

          // Gi·∫£m Cu¬≤‚Å∫ v√† tƒÉng Cu kim lo·∫°i
          if (cuPercentage > 0) {
            cuPercentage -= 0.5 * reactionRate;
            cuDepositPercentage += 0.5 * reactionRate;

            if (cuPercentage < 0) cuPercentage = 0;
            if (cuDepositPercentage > 100) cuDepositPercentage = 100;

            document.getElementById("cuIons").textContent =
              cuPercentage.toFixed(1) + "%";
            document.getElementById("cuDeposit").textContent =
              cuDepositPercentage.toFixed(1) + "%";

            updateSolutionColor();

            // T·∫°o hi·ªáu ·ª©ng ng·∫´u nhi√™n
            if (Math.random() < 0.3 * reactionRate) {
              createElectron();
            }

            if (Math.random() < 0.2 * reactionRate) {
              createIon("cu");
            }

            if (Math.random() < 0.15 * reactionRate) {
              createIon("fe");
            }
          } else {
            clearInterval(animationInterval);
            animationInterval = null;
            alert(
              "Ph·∫£n ·ª©ng ho√†n t·∫•t! T·∫•t c·∫£ Cu¬≤‚Å∫ ƒë√£ ƒë∆∞·ª£c kh·ª≠ th√†nh Cu kim lo·∫°i."
            );
          }
        }, 100);
      }

      function pauseReaction() {
        isPaused = !isPaused;
        document.querySelector(".pause-btn").textContent = isPaused
          ? "‚ñ∂Ô∏è Ti·∫øp t·ª•c"
          : "‚è∏Ô∏è T·∫°m d·ª´ng";
      }

      function resetReaction() {
        if (animationInterval) {
          clearInterval(animationInterval);
          animationInterval = null;
        }

        isPaused = false;
        elapsedTime = 0;
        cuPercentage = 100;
        cuDepositPercentage = 0;
        electronCount = 0;
        ionCount = 0;

        document.getElementById("timeValue").textContent = "0s";
        document.getElementById("cuIons").textContent = "100%";
        document.getElementById("cuDeposit").textContent = "0%";
        document.querySelector(".pause-btn").textContent = "‚è∏Ô∏è T·∫°m d·ª´ng";

        // X√≥a t·∫•t c·∫£ c√°c hi·ªáu ·ª©ng
        solution
          .querySelectorAll(".electron, .ion, .cu-deposit")
          .forEach((el) => el.remove());

        // Reset m√†u s·∫Øc
        updateSolutionColor();
        ironNail.style.background =
          "linear-gradient(90deg, #B0B0B0 0%, #DCDCDC 50%, #B0B0B0 100%)";
      }

      // Kh·ªüi t·∫°o m√†u ban ƒë·∫ßu
      updateSolutionColor();

      // T·∫°o m·ªôt s·ªë ion Cu¬≤‚Å∫ ban ƒë·∫ßu
      for (let i = 0; i < 15; i++) {
        setTimeout(() => createIon("cu"), i * 200);
      }
    </script>
  </body>
</html>
