<!-- @format -->

<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MÃ´ phá»ng: Äá»‹nh luáº­t Ã”m</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }

      header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }

      h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .subtitle {
        font-size: 1.1em;
        opacity: 0.9;
      }

      .content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        padding: 30px;
      }

      .controls {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 15px;
      }

      .control-group {
        margin-bottom: 30px;
      }

      .control-group label {
        display: block;
        font-weight: 600;
        margin-bottom: 10px;
        color: #333;
        font-size: 1.1em;
      }

      input[type="range"] {
        width: 100%;
        height: 8px;
        border-radius: 5px;
        background: #ddd;
        outline: none;
        -webkit-appearance: none;
      }

      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #667eea;
        cursor: pointer;
        transition: all 0.3s;
      }

      input[type="range"]::-webkit-slider-thumb:hover {
        background: #764ba2;
        transform: scale(1.2);
      }

      .value-display {
        display: flex;
        justify-content: space-between;
        margin-top: 8px;
        font-size: 0.95em;
        color: #666;
      }

      .results {
        background: #e3f2fd;
        padding: 25px;
        border-radius: 15px;
        border-left: 5px solid #2196f3;
      }

      .result-item {
        margin-bottom: 20px;
        padding: 15px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      .result-label {
        font-weight: 600;
        color: #555;
        margin-bottom: 5px;
      }

      .result-value {
        font-size: 1.8em;
        color: #2196f3;
        font-weight: bold;
      }

      .circuit-container {
        grid-column: 1 / -1;
        background: #f8f9fa;
        padding: 25px;
        border-radius: 15px;
        text-align: center;
      }

      canvas {
        border: 2px solid #ddd;
        border-radius: 10px;
        background: white;
        max-width: 100%;
      }

      .explanation {
        grid-column: 1 / -1;
        background: #fff3e0;
        padding: 25px;
        border-radius: 15px;
        border-left: 5px solid #ff9800;
      }

      .explanation h2 {
        color: #e65100;
        margin-bottom: 15px;
      }

      .explanation p {
        line-height: 1.8;
        color: #333;
        margin-bottom: 15px;
      }

      .formula {
        background: white;
        padding: 15px;
        border-radius: 10px;
        text-align: center;
        font-size: 1.3em;
        font-weight: bold;
        color: #e65100;
        margin: 15px 0;
      }

      .example {
        background: #f1f8e9;
        padding: 20px;
        border-radius: 10px;
        margin-top: 15px;
        border-left: 4px solid #8bc34a;
      }

      .example h3 {
        color: #558b2f;
        margin-bottom: 10px;
      }

      @media (max-width: 768px) {
        .content {
          grid-template-columns: 1fr;
        }
        h1 {
          font-size: 1.8em;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>âš¡ MÃ´ phá»ng: ThÃ­ nghiá»‡m Äá»‹nh luáº­t Ã”m</h1>
        <p class="subtitle">
          KhÃ¡m phÃ¡ má»‘i quan há»‡ giá»¯a Äiá»‡n Ã¡p, Äiá»‡n trá»Ÿ vÃ  DÃ²ng Ä‘iá»‡n
        </p>
      </header>

      <div class="content">
        <div class="controls">
          <h2 style="margin-bottom: 20px; color: #667eea">
            âš™ï¸ Thiáº¿t láº­p ThÃ­ nghiá»‡m
          </h2>

          <div class="control-group">
            <label for="voltage">Hiá»‡u Ä‘iá»‡n tháº¿ (V) - Volt:</label>
            <input
              type="range"
              id="voltage"
              min="0"
              max="20"
              value="10"
              step="0.5" />
            <div class="value-display">
              <span>0V</span>
              <span id="voltageValue" style="font-weight: bold; color: #667eea"
                >10V</span
              >
              <span>20V</span>
            </div>
          </div>

          <div class="control-group">
            <label for="resistance">Äiá»‡n trá»Ÿ (R) - Ohm (Î©):</label>
            <input
              type="range"
              id="resistance"
              min="1"
              max="100"
              value="50"
              step="1" />
            <div class="value-display">
              <span>1Î©</span>
              <span
                id="resistanceValue"
                style="font-weight: bold; color: #764ba2"
                >50Î©</span
              >
              <span>100Î©</span>
            </div>
          </div>
        </div>

        <div class="results">
          <h2 style="margin-bottom: 20px; color: #2196f3">ğŸ“Š Káº¿t quáº£ Äo</h2>

          <div class="result-item">
            <div class="result-label">Hiá»‡u Ä‘iá»‡n tháº¿:</div>
            <div class="result-value"><span id="displayV">10</span> V</div>
          </div>

          <div class="result-item">
            <div class="result-label">Äiá»‡n trá»Ÿ:</div>
            <div class="result-value"><span id="displayR">50</span> Î©</div>
          </div>

          <div
            class="result-item"
            style="background: #e3f2fd; border: 2px solid #2196f3">
            <div class="result-label">âš¡ CÆ°á»ng Ä‘á»™ dÃ²ng Ä‘iá»‡n:</div>
            <div class="result-value" style="font-size: 2.2em">
              <span id="displayI">0.20</span> A
            </div>
          </div>
        </div>

        <div class="circuit-container">
          <h2 style="margin-bottom: 15px; color: #667eea">
            ğŸ”Œ SÆ¡ Ä‘á»“ Máº¡ch Äiá»‡n
          </h2>
          <canvas id="circuitCanvas" width="800" height="400"></canvas>
        </div>

        <div class="explanation">
          <h2>ğŸ“š Giáº£i thÃ­ch Äá»‹nh luáº­t Ã”m</h2>

          <div class="formula">I = V / R</div>

          <p>
            <strong>Äá»‹nh luáº­t Ã”m</strong> lÃ  má»™t trong nhá»¯ng Ä‘á»‹nh luáº­t cÆ¡ báº£n
            nháº¥t cá»§a Ä‘iá»‡n há»c, Ä‘Æ°á»£c nhÃ  váº­t lÃ½ ngÆ°á»i Äá»©c Georg Simon Ohm phÃ¡t
            hiá»‡n nÄƒm 1827. Äá»‹nh luáº­t nÃ y mÃ´ táº£ má»‘i quan há»‡ tuyáº¿n tÃ­nh giá»¯a hiá»‡u
            Ä‘iá»‡n tháº¿, cÆ°á»ng Ä‘á»™ dÃ²ng Ä‘iá»‡n vÃ  Ä‘iá»‡n trá»Ÿ trong má»™t máº¡ch Ä‘iá»‡n.
          </p>

          <h3 style="color: #e65100; margin-top: 20px; margin-bottom: 10px">
            ğŸ” CÃ¡c Ä‘áº¡i lÆ°á»£ng trong cÃ´ng thá»©c:
          </h3>
          <p>
            â€¢ <strong>I (CÆ°á»ng Ä‘á»™ dÃ²ng Ä‘iá»‡n)</strong>: Äo báº±ng Ampe (A), lÃ 
            lÆ°á»£ng Ä‘iá»‡n tÃ­ch di chuyá»ƒn qua tiáº¿t diá»‡n dÃ¢y dáº«n trong má»™t Ä‘Æ¡n vá»‹
            thá»i gian. TÆ°Æ¡ng tá»± nhÆ° lÆ°u lÆ°á»£ng nÆ°á»›c cháº£y qua á»‘ng.<br /><br />
            â€¢ <strong>V (Hiá»‡u Ä‘iá»‡n tháº¿)</strong>: Äo báº±ng Volt (V), lÃ  "Ã¡p lá»±c
            Ä‘iá»‡n" thÃºc Ä‘áº©y electron di chuyá»ƒn. CÃ ng cao, dÃ²ng Ä‘iá»‡n cÃ ng máº¡nh.
            Giá»‘ng nhÆ° Ä‘á»™ chÃªnh lá»‡ch Ã¡p suáº¥t nÆ°á»›c.<br /><br />
            â€¢ <strong>R (Äiá»‡n trá»Ÿ)</strong>: Äo báº±ng Ohm (Î©), lÃ  Ä‘á»™ cáº£n trá»Ÿ cá»§a
            váº­t liá»‡u Ä‘á»‘i vá»›i dÃ²ng Ä‘iá»‡n. CÃ ng lá»›n, dÃ²ng Ä‘iá»‡n cÃ ng yáº¿u. Giá»‘ng nhÆ°
            Ä‘Æ°á»ng á»‘ng háº¹p cáº£n trá»Ÿ dÃ²ng nÆ°á»›c.
          </p>

          <h3 style="color: #e65100; margin-top: 20px; margin-bottom: 10px">
            âš™ï¸ NguyÃªn lÃ½ hoáº¡t Ä‘á»™ng:
          </h3>
          <p>
            Khi ta tÄƒng hiá»‡u Ä‘iá»‡n tháº¿ (V), lá»±c Ä‘áº©y electron máº¡nh hÆ¡n â†’ dÃ²ng Ä‘iá»‡n
            (I) tÄƒng tá»‰ lá»‡ thuáº­n.<br />
            Khi ta tÄƒng Ä‘iá»‡n trá»Ÿ (R), electron gáº·p nhiá»u cáº£n trá»Ÿ hÆ¡n â†’ dÃ²ng Ä‘iá»‡n
            (I) giáº£m tá»‰ lá»‡ nghá»‹ch.<br /><br />
            Trong mÃ´ phá»ng, báº¡n cÃ³ thá»ƒ tháº¥y tá»‘c Ä‘á»™ di chuyá»ƒn cá»§a cÃ¡c electron
            (cháº¥m mÃ u vÃ ng) thay Ä‘á»•i theo dÃ²ng Ä‘iá»‡n: dÃ²ng Ä‘iá»‡n cÃ ng lá»›n,
            electron di chuyá»ƒn cÃ ng nhanh!
          </p>

          <div class="example">
            <h3>ğŸ’¡ VÃ­ dá»¥ thá»±c táº¿:</h3>
            <p>
              <strong>1. BÃ³ng Ä‘Ã¨n gia Ä‘Ã¬nh:</strong> Nguá»“n Ä‘iá»‡n nhÃ  báº¡n cung cáº¥p
              220V. Má»™t bÃ³ng Ä‘Ã¨n 100W cÃ³ Ä‘iá»‡n trá»Ÿ khoáº£ng 484Î©. Theo Äá»‹nh luáº­t
              Ã”m: I = 220V / 484Î© â‰ˆ 0.45A. ÄÃ¢y lÃ  dÃ²ng Ä‘iá»‡n cháº¡y qua bÃ³ng Ä‘Ã¨n
              khi báº­t.<br /><br />

              <strong>2. Sáº¡c Ä‘iá»‡n thoáº¡i:</strong> Sáº¡c USB cung cáº¥p 5V. Náº¿u Ä‘iá»‡n
              thoáº¡i báº¡n Ä‘ang sáº¡c vá»›i dÃ²ng 2A, Ä‘iá»‡n trá»Ÿ tÆ°Æ¡ng Ä‘Æ°Æ¡ng lÃ : R = V/I =
              5V / 2A = 2.5Î©.<br /><br />

              <strong>3. DÃ¢y dáº«n Ä‘iá»‡n:</strong> Táº¡i sao dÃ¢y Ä‘á»“ng Ä‘Æ°á»£c dÃ¹ng lÃ m
              dÃ¢y dáº«n? VÃ¬ Ä‘á»“ng cÃ³ Ä‘iá»‡n trá»Ÿ ráº¥t nhá» (â‰ˆ 0.000017 Î©Â·m), cho phÃ©p
              dÃ²ng Ä‘iá»‡n lá»›n Ä‘i qua mÃ  khÃ´ng bá»‹ tá»•n hao nhiá»u nÄƒng lÆ°á»£ng.<br /><br />

              <strong>4. Cáº§u chÃ¬ báº£o vá»‡:</strong> Khi dÃ²ng Ä‘iá»‡n quÃ¡ lá»›n (do cháº­p
              máº¡ch hoáº·c quÃ¡ táº£i), nhiá»‡t Ä‘á»™ tÄƒng cao lÃ m cáº§u chÃ¬ nÃ³ng cháº£y, ngáº¯t
              máº¡ch Ä‘á»ƒ báº£o vá»‡ thiáº¿t bá»‹. ÄÃ¢y lÃ  á»©ng dá»¥ng cá»§a hiá»‡n tÆ°á»£ng: I tÄƒng â†’
              nhiá»‡t tá»a ra tÄƒng (theo Ä‘á»‹nh luáº­t Jun-LenxÆ¡: Q = IÂ²Rt).
            </p>
          </div>

          <h3 style="color: #e65100; margin-top: 20px; margin-bottom: 10px">
            ğŸ¯ Táº¡i sao Äá»‹nh luáº­t Ã”m quan trá»ng?
          </h3>
          <p>
            Äá»‹nh luáº­t Ã”m lÃ  ná»n táº£ng Ä‘á»ƒ thiáº¿t káº¿ má»i máº¡ch Ä‘iá»‡n, tá»« Ä‘Æ¡n giáº£n (Ä‘Ã¨n
            pin) Ä‘áº¿n phá»©c táº¡p (mÃ¡y tÃ­nh, smartphone). Ká»¹ sÆ° Ä‘iá»‡n dÃ¹ng nÃ³ Ä‘á»ƒ:<br />
            â€¢ TÃ­nh toÃ¡n dÃ²ng Ä‘iá»‡n cáº§n thiáº¿t cho thiáº¿t bá»‹<br />
            â€¢ Chá»n dÃ¢y dáº«n phÃ¹ há»£p (Ä‘Æ°á»ng kÃ­nh, cháº¥t liá»‡u)<br />
            â€¢ Thiáº¿t káº¿ báº£o vá»‡ quÃ¡ táº£i<br />
            â€¢ Tá»‘i Æ°u hÃ³a tiÃªu thá»¥ nÄƒng lÆ°á»£ng<br /><br />

            <strong>LÆ°u Ã½:</strong> Äá»‹nh luáº­t Ã”m chá»‰ Ã¡p dá»¥ng cho váº­t liá»‡u "tuÃ¢n
            thá»§ Ä‘á»‹nh luáº­t Ã”m" (Ohmic materials) nhÆ° kim loáº¡i á»Ÿ nhiá»‡t Ä‘á»™ khÃ´ng
            Ä‘á»•i. Vá»›i bÃ¡n dáº«n, Ä‘iá»‘t, hay váº­t liá»‡u siÃªu dáº«n, má»‘i quan há»‡ phá»©c táº¡p
            hÆ¡n!
          </p>
        </div>
      </div>
    </div>

    <script>
      // Láº¥y cÃ¡c pháº§n tá»­ HTML
      const voltageSlider = document.getElementById("voltage");
      const resistanceSlider = document.getElementById("resistance");
      const voltageValue = document.getElementById("voltageValue");
      const resistanceValue = document.getElementById("resistanceValue");
      const displayV = document.getElementById("displayV");
      const displayR = document.getElementById("displayR");
      const displayI = document.getElementById("displayI");
      const canvas = document.getElementById("circuitCanvas");
      const ctx = canvas.getContext("2d");

      // Máº£ng lÆ°u trá»¯ vá»‹ trÃ­ cÃ¡c electron
      let electrons = [];
      const numElectrons = 15;

      // Khá»Ÿi táº¡o vá»‹ trÃ­ electron ngáº«u nhiÃªn trÃªn Ä‘Æ°á»ng máº¡ch
      function initElectrons() {
        electrons = [];
        for (let i = 0; i < numElectrons; i++) {
          electrons.push({
            position: Math.random() * 100, // Vá»‹ trÃ­ tá»« 0-100%
            speed: 0,
          });
        }
      }

      // HÃ m tÃ­nh toÃ¡n dÃ²ng Ä‘iá»‡n theo Äá»‹nh luáº­t Ã”m: I = V / R
      function calculateCurrent() {
        const V = parseFloat(voltageSlider.value);
        const R = parseFloat(resistanceSlider.value);

        // TÃ­nh cÆ°á»ng Ä‘á»™ dÃ²ng Ä‘iá»‡n (Ampe)
        const I = V / R;

        // Cáº­p nháº­t hiá»ƒn thá»‹
        voltageValue.textContent = V + "V";
        resistanceValue.textContent = R + "Î©";
        displayV.textContent = V;
        displayR.textContent = R;
        displayI.textContent = I.toFixed(3); // LÃ m trÃ²n 3 chá»¯ sá»‘ tháº­p phÃ¢n

        // Cáº­p nháº­t tá»‘c Ä‘á»™ electron tá»‰ lá»‡ vá»›i dÃ²ng Ä‘iá»‡n
        const baseSpeed = 0.5;
        const electronSpeed = baseSpeed * I * 5; // NhÃ¢n 5 Ä‘á»ƒ tháº¥y rÃµ hÆ¡n
        electrons.forEach((e) => (e.speed = electronSpeed));

        return I;
      }

      // HÃ m váº½ máº¡ch Ä‘iá»‡n
      function drawCircuit() {
        // XÃ³a canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const circuitWidth = 600;
        const circuitHeight = 250;

        // Tá»a Ä‘á»™ cÃ¡c Ä‘iá»ƒm chÃ­nh
        const left = centerX - circuitWidth / 2;
        const right = centerX + circuitWidth / 2;
        const top = centerY - circuitHeight / 2;
        const bottom = centerY + circuitHeight / 2;

        // Váº½ dÃ¢y dáº«n
        ctx.strokeStyle = "#333";
        ctx.lineWidth = 4;
        ctx.beginPath();
        ctx.moveTo(left, top);
        ctx.lineTo(right, top);
        ctx.lineTo(right, bottom);
        ctx.lineTo(left, bottom);
        ctx.closePath();
        ctx.stroke();

        // Váº½ nguá»“n Ä‘iá»‡n (pin) - bÃªn trÃ¡i
        const batteryX = left;
        const batteryY = centerY;
        ctx.strokeStyle = "#333";
        ctx.lineWidth = 3;
        // Cá»±c dÆ°Æ¡ng
        ctx.beginPath();
        ctx.moveTo(batteryX - 5, batteryY - 30);
        ctx.lineTo(batteryX - 5, batteryY + 30);
        ctx.stroke();
        // Cá»±c Ã¢m
        ctx.lineWidth = 5;
        ctx.beginPath();
        ctx.moveTo(batteryX + 5, batteryY - 20);
        ctx.lineTo(batteryX + 5, batteryY + 20);
        ctx.stroke();

        // NhÃ£n nguá»“n Ä‘iá»‡n
        ctx.fillStyle = "#e74c3c";
        ctx.font = "bold 18px Arial";
        ctx.textAlign = "center";
        ctx.fillText("Nguá»“n Ä‘iá»‡n", batteryX, batteryY - 50);
        ctx.fillStyle = "#333";
        ctx.font = "bold 20px Arial";
        ctx.fillText(voltageSlider.value + "V", batteryX, batteryY + 70);

        // Váº½ Ä‘iá»‡n trá»Ÿ - á»Ÿ trÃªn
        const resistorX = centerX;
        const resistorY = top;
        const resistorWidth = 80;
        const resistorHeight = 25;

        ctx.strokeStyle = "#f39c12";
        ctx.fillStyle = "#fff3cd";
        ctx.lineWidth = 3;
        ctx.fillRect(
          resistorX - resistorWidth / 2,
          resistorY - resistorHeight / 2,
          resistorWidth,
          resistorHeight
        );
        ctx.strokeRect(
          resistorX - resistorWidth / 2,
          resistorY - resistorHeight / 2,
          resistorWidth,
          resistorHeight
        );

        // Váº½ zigzag trong Ä‘iá»‡n trá»Ÿ
        ctx.strokeStyle = "#f39c12";
        ctx.lineWidth = 2;
        ctx.beginPath();
        const zigzagStart = resistorX - resistorWidth / 2 + 10;
        const zigzagEnd = resistorX + resistorWidth / 2 - 10;
        const zigzagStep = (zigzagEnd - zigzagStart) / 6;
        ctx.moveTo(zigzagStart, resistorY);
        for (let i = 1; i <= 6; i++) {
          const x = zigzagStart + i * zigzagStep;
          const y = resistorY + (i % 2 === 0 ? 8 : -8);
          ctx.lineTo(x, y);
        }
        ctx.stroke();

        // NhÃ£n Ä‘iá»‡n trá»Ÿ
        ctx.fillStyle = "#d35400";
        ctx.font = "bold 18px Arial";
        ctx.textAlign = "center";
        ctx.fillText("Äiá»‡n trá»Ÿ", resistorX, resistorY - 35);
        ctx.fillStyle = "#333";
        ctx.font = "bold 20px Arial";
        ctx.fillText(resistanceSlider.value + "Î©", resistorX, resistorY + 50);

        // Váº½ ampe káº¿ - bÃªn pháº£i
        const ammeterX = right;
        const ammeterY = centerY;
        const ammeterRadius = 35;

        ctx.strokeStyle = "#3498db";
        ctx.fillStyle = "#e3f2fd";
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.arc(ammeterX, ammeterY, ammeterRadius, 0, Math.PI * 2);
        ctx.fill();
        ctx.stroke();

        // Chá»¯ A trong ampe káº¿
        ctx.fillStyle = "#2c3e50";
        ctx.font = "bold 24px Arial";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillText("A", ammeterX, ammeterY);

        // NhÃ£n ampe káº¿
        ctx.fillStyle = "#2980b9";
        ctx.font = "bold 18px Arial";
        ctx.textBaseline = "alphabetic";
        ctx.fillText("Ampe káº¿", ammeterX, ammeterY - 55);

        const current = parseFloat(displayI.textContent);
        ctx.fillStyle = "#e74c3c";
        ctx.font = "bold 20px Arial";
        ctx.fillText(current.toFixed(3) + "A", ammeterX, ammeterY + 65);

        // Váº½ electron di chuyá»ƒn
        drawElectrons(left, right, top, bottom, centerX, centerY);

        // Váº½ mÅ©i tÃªn chá»‰ chiá»u dÃ²ng Ä‘iá»‡n
        drawCurrentArrows(left, right, top, bottom, centerX);
      }

      // HÃ m váº½ cÃ¡c electron di chuyá»ƒn
      function drawElectrons(left, right, top, bottom, centerX, centerY) {
        const totalPath = (right - left) * 2 + (bottom - top) * 2;

        electrons.forEach((electron) => {
          // Cáº­p nháº­t vá»‹ trÃ­
          electron.position += electron.speed;
          if (electron.position > 100) electron.position = 0;

          // TÃ­nh tá»a Ä‘á»™ thá»±c táº¿ dá»±a trÃªn vá»‹ trÃ­ pháº§n trÄƒm
          const currentPos = (electron.position / 100) * totalPath;
          let x, y;

          const seg1 = right - left;
          const seg2 = seg1 + (bottom - top);
          const seg3 = seg2 + (right - left);

          if (currentPos < seg1) {
            // Äoáº¡n trÃªn: tá»« trÃ¡i sang pháº£i
            x = left + currentPos;
            y = top;
          } else if (currentPos < seg2) {
            // Äoáº¡n pháº£i: tá»« trÃªn xuá»‘ng dÆ°á»›i
            x = right;
            y = top + (currentPos - seg1);
          } else if (currentPos < seg3) {
            // Äoáº¡n dÆ°á»›i: tá»« pháº£i sang trÃ¡i
            x = right - (currentPos - seg2);
            y = bottom;
          } else {
            // Äoáº¡n trÃ¡i: tá»« dÆ°á»›i lÃªn trÃªn
            x = left;
            y = bottom - (currentPos - seg3);
          }

          // Váº½ electron
          ctx.fillStyle = "#ffd700";
          ctx.shadowColor = "#ffd700";
          ctx.shadowBlur = 10;
          ctx.beginPath();
          ctx.arc(x, y, 5, 0, Math.PI * 2);
          ctx.fill();
          ctx.shadowBlur = 0;

          // Váº½ dáº¥u - (electron mang Ä‘iá»‡n tÃ­ch Ã¢m)
          ctx.fillStyle = "#333";
          ctx.font = "bold 10px Arial";
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";
          ctx.fillText("-", x, y);
        });
      }

      // HÃ m váº½ mÅ©i tÃªn chá»‰ chiá»u dÃ²ng Ä‘iá»‡n
      function drawCurrentArrows(left, right, top, bottom, centerX) {
        ctx.strokeStyle = "#e74c3c";
        ctx.fillStyle = "#e74c3c";
        ctx.lineWidth = 2;

        // MÅ©i tÃªn trÃªn (Ä‘i tá»« trÃ¡i sang pháº£i)
        drawArrow(centerX - 100, top - 20, centerX + 100, top - 20);

        // NhÃ£n
        ctx.font = "bold 14px Arial";
        ctx.textAlign = "center";
        ctx.fillText("Chiá»u dÃ²ng Ä‘iá»‡n I", centerX, top - 35);
      }

      // HÃ m váº½ mÅ©i tÃªn
      function drawArrow(fromX, fromY, toX, toY) {
        const headLength = 15;
        const angle = Math.atan2(toY - fromY, toX - fromX);

        ctx.beginPath();
        ctx.moveTo(fromX, fromY);
        ctx.lineTo(toX, toY);
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(toX, toY);
        ctx.lineTo(
          toX - headLength * Math.cos(angle - Math.PI / 6),
          toY - headLength * Math.sin(angle - Math.PI / 6)
        );
        ctx.lineTo(
          toX - headLength * Math.cos(angle + Math.PI / 6),
          toY - headLength * Math.sin(angle + Math.PI / 6)
        );
        ctx.closePath();
        ctx.fill();
      }

      // HÃ m animation
      function animate() {
        drawCircuit();
        requestAnimationFrame(animate);
      }

      // Láº¯ng nghe sá»± kiá»‡n thay Ä‘á»•i
      voltageSlider.addEventListener("input", calculateCurrent);
      resistanceSlider.addEventListener("input", calculateCurrent);

      // Khá»Ÿi táº¡o
      initElectrons();
      calculateCurrent();
      animate();
    </script>
  </body>
</html>
